<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DuckDB를 이용하여 S3 테이블 쿼리하기 | Daily Log</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/favicons/favicon-16x16.png">
    <link rel="shortcut icon" href="../assets/favicons/favicon.ico">
    <link rel="alternate" type="application/rss+xml" href="https://jiyeonseo.github.io/rss.xml" title="Daily Log RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://jiyeonseo.github.io/feed.atom" title="Daily Log Atom Feed">
    <link rel="alternate" type="application/json" href="https://jiyeonseo.github.io/feed.json" title="Daily Log JSON Feed">
    <meta name="description" content="요즘 DuckDB UI가 발표된 이후로 주변에서 DuckDB에 대한 관심이 많아지는 모습을 보았는데, 이름때문에 OLTP로 인식을 많이 하는 것 같기도 하고 역시 실제 어떻게 사용되는 모습인지를 보면 더 실감이 나지 않을까 싶어, 적절한 튜토리얼이 보여 함께 나누면 좋을 것 같아 [Query S3 Table with DuckDB 원문](https://tob ...">
    
    <link rel="preload" href="/assets/css/0.styles.d9e965bb.css" as="style"><link rel="preload" href="/assets/js/app.ca882463.js" as="script"><link rel="preload" href="/assets/js/4.d48376ce.js" as="script"><link rel="preload" href="/assets/js/1.a7328d07.js" as="script"><link rel="preload" href="/assets/js/126.0d92253e.js" as="script"><link rel="prefetch" href="/assets/js/100.20349d4f.js"><link rel="prefetch" href="/assets/js/101.337c7ac5.js"><link rel="prefetch" href="/assets/js/102.df0c3b4c.js"><link rel="prefetch" href="/assets/js/103.9ab2bce5.js"><link rel="prefetch" href="/assets/js/104.a8cfe2ac.js"><link rel="prefetch" href="/assets/js/105.fbf41c7d.js"><link rel="prefetch" href="/assets/js/106.137693c5.js"><link rel="prefetch" href="/assets/js/107.7b67094d.js"><link rel="prefetch" href="/assets/js/108.9c79596c.js"><link rel="prefetch" href="/assets/js/109.8f827ec6.js"><link rel="prefetch" href="/assets/js/11.266ec168.js"><link rel="prefetch" href="/assets/js/110.d3557852.js"><link rel="prefetch" href="/assets/js/111.037463d3.js"><link rel="prefetch" href="/assets/js/112.71dfe16b.js"><link rel="prefetch" href="/assets/js/113.98586e30.js"><link rel="prefetch" href="/assets/js/114.b61c2291.js"><link rel="prefetch" href="/assets/js/115.013a015b.js"><link rel="prefetch" href="/assets/js/116.1b44155e.js"><link rel="prefetch" href="/assets/js/117.ba320cb6.js"><link rel="prefetch" href="/assets/js/118.bce8c1cf.js"><link rel="prefetch" href="/assets/js/119.4cfe496d.js"><link rel="prefetch" href="/assets/js/12.8f3a6060.js"><link rel="prefetch" href="/assets/js/120.df3465f8.js"><link rel="prefetch" href="/assets/js/121.2ab0ab3e.js"><link rel="prefetch" href="/assets/js/122.e84ca54f.js"><link rel="prefetch" href="/assets/js/123.c7c4409a.js"><link rel="prefetch" href="/assets/js/124.07b6783e.js"><link rel="prefetch" href="/assets/js/125.b1701c7a.js"><link rel="prefetch" href="/assets/js/127.007a575d.js"><link rel="prefetch" href="/assets/js/13.9ff4ae05.js"><link rel="prefetch" href="/assets/js/14.215024b0.js"><link rel="prefetch" href="/assets/js/15.0ff47d16.js"><link rel="prefetch" href="/assets/js/16.37e6c0ed.js"><link rel="prefetch" href="/assets/js/17.cbba4f66.js"><link rel="prefetch" href="/assets/js/18.b7e71dfe.js"><link rel="prefetch" href="/assets/js/19.c4464fe9.js"><link rel="prefetch" href="/assets/js/2.f8783da8.js"><link rel="prefetch" href="/assets/js/20.2dc08191.js"><link rel="prefetch" href="/assets/js/21.ff5f7b06.js"><link rel="prefetch" href="/assets/js/22.661f2a84.js"><link rel="prefetch" href="/assets/js/23.cf29033a.js"><link rel="prefetch" href="/assets/js/24.dd6f5bc6.js"><link rel="prefetch" href="/assets/js/25.9d7bdc46.js"><link rel="prefetch" href="/assets/js/26.3b8d6e0b.js"><link rel="prefetch" href="/assets/js/27.80928391.js"><link rel="prefetch" href="/assets/js/28.58a77b17.js"><link rel="prefetch" href="/assets/js/29.7f8113cb.js"><link rel="prefetch" href="/assets/js/3.487971c8.js"><link rel="prefetch" href="/assets/js/30.48f0ed8a.js"><link rel="prefetch" href="/assets/js/31.832b04d7.js"><link rel="prefetch" href="/assets/js/32.f05f003a.js"><link rel="prefetch" href="/assets/js/33.f9295acc.js"><link rel="prefetch" href="/assets/js/34.a80db534.js"><link rel="prefetch" href="/assets/js/35.abe84c23.js"><link rel="prefetch" href="/assets/js/36.4edabe0d.js"><link rel="prefetch" href="/assets/js/37.e7cfc869.js"><link rel="prefetch" href="/assets/js/38.aa1064e1.js"><link rel="prefetch" href="/assets/js/39.06859e09.js"><link rel="prefetch" href="/assets/js/40.7969b128.js"><link rel="prefetch" href="/assets/js/41.7daa36db.js"><link rel="prefetch" href="/assets/js/42.0b1c5b61.js"><link rel="prefetch" href="/assets/js/43.e741fcb4.js"><link rel="prefetch" href="/assets/js/44.212dc972.js"><link rel="prefetch" href="/assets/js/45.c68048f8.js"><link rel="prefetch" href="/assets/js/46.114afb81.js"><link rel="prefetch" href="/assets/js/47.862c6e14.js"><link rel="prefetch" href="/assets/js/48.c9b2f074.js"><link rel="prefetch" href="/assets/js/49.e7114482.js"><link rel="prefetch" href="/assets/js/5.bcd1442f.js"><link rel="prefetch" href="/assets/js/50.f467528a.js"><link rel="prefetch" href="/assets/js/51.f821ca96.js"><link rel="prefetch" href="/assets/js/52.649435a5.js"><link rel="prefetch" href="/assets/js/53.5b8dc67a.js"><link rel="prefetch" href="/assets/js/54.a0ca167c.js"><link rel="prefetch" href="/assets/js/55.3c3380f0.js"><link rel="prefetch" href="/assets/js/56.18549872.js"><link rel="prefetch" href="/assets/js/57.e19ed683.js"><link rel="prefetch" href="/assets/js/58.79fe55f7.js"><link rel="prefetch" href="/assets/js/59.4db8e029.js"><link rel="prefetch" href="/assets/js/6.49ca5872.js"><link rel="prefetch" href="/assets/js/60.9abd3c2e.js"><link rel="prefetch" href="/assets/js/61.e63ac9bb.js"><link rel="prefetch" href="/assets/js/62.6e924a53.js"><link rel="prefetch" href="/assets/js/63.9f33542a.js"><link rel="prefetch" href="/assets/js/64.38c313d2.js"><link rel="prefetch" href="/assets/js/65.fcfcf532.js"><link rel="prefetch" href="/assets/js/66.5012f3db.js"><link rel="prefetch" href="/assets/js/67.5b57b6b4.js"><link rel="prefetch" href="/assets/js/68.d99d5845.js"><link rel="prefetch" href="/assets/js/69.8107e489.js"><link rel="prefetch" href="/assets/js/7.a66f6791.js"><link rel="prefetch" href="/assets/js/70.27161263.js"><link rel="prefetch" href="/assets/js/71.761b94a6.js"><link rel="prefetch" href="/assets/js/72.531ebc5e.js"><link rel="prefetch" href="/assets/js/73.2c4b9c38.js"><link rel="prefetch" href="/assets/js/74.f50e9025.js"><link rel="prefetch" href="/assets/js/75.95a579c0.js"><link rel="prefetch" href="/assets/js/76.54cac59a.js"><link rel="prefetch" href="/assets/js/77.43aab426.js"><link rel="prefetch" href="/assets/js/78.f19c6ed1.js"><link rel="prefetch" href="/assets/js/79.5758ad17.js"><link rel="prefetch" href="/assets/js/8.b2bf099e.js"><link rel="prefetch" href="/assets/js/80.9a393ba1.js"><link rel="prefetch" href="/assets/js/81.53c49996.js"><link rel="prefetch" href="/assets/js/82.b94db98b.js"><link rel="prefetch" href="/assets/js/83.44f7bcdf.js"><link rel="prefetch" href="/assets/js/84.38740eee.js"><link rel="prefetch" href="/assets/js/85.75d98f53.js"><link rel="prefetch" href="/assets/js/86.cbe5c682.js"><link rel="prefetch" href="/assets/js/87.91edfd8c.js"><link rel="prefetch" href="/assets/js/88.a414f2e3.js"><link rel="prefetch" href="/assets/js/89.a0e02dc8.js"><link rel="prefetch" href="/assets/js/90.8df0fa19.js"><link rel="prefetch" href="/assets/js/91.30c58ca2.js"><link rel="prefetch" href="/assets/js/92.41dc4428.js"><link rel="prefetch" href="/assets/js/93.4dac8c5f.js"><link rel="prefetch" href="/assets/js/94.6f998976.js"><link rel="prefetch" href="/assets/js/95.fa78735e.js"><link rel="prefetch" href="/assets/js/96.46ebbc99.js"><link rel="prefetch" href="/assets/js/97.b91d70bf.js"><link rel="prefetch" href="/assets/js/98.08cf1b1d.js"><link rel="prefetch" href="/assets/js/99.f184a890.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.b53dac77.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d9e965bb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">Daily Log </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li><li class="nav-item"><a href="/about.html" class="nav-link">About Me</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">Daily Log </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li><li class="mobile-nav-item"><a href="/about.html" class="nav-link">About Me</a></li> <li class="mobile-nav-item"><a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        DuckDB를 이용하여 S3 테이블 쿼리하기
      </h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2025-03-15T00:00:00.000Z">
      2025-03-15
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/tag/db" data-v-42ccfcd5><span data-v-42ccfcd5>db</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><p>요즘 DuckDB UI가 발표된 이후로 주변에서 DuckDB에 대한 관심이 많아지는 모습을 보았는데, 이름때문에 OLTP로 인식을 많이 하는 것 같기도 하고 역시 실제 어떻게 사용되는 모습인지를 보면 더 실감이 나지 않을까 싶어, 적절한 튜토리얼이 보여 함께 나누면 좋을 것 같아 <a href="https://tobilg.com/query-s3-tables-with-duckdb" target="_blank" rel="noopener noreferrer">Query S3 Table with DuckDB 원문<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>을 번역해보았다.</p> <hr> <p>DuckDB는 AWS S3 테이블에서 Iceberg 데이터를 쿼리할 수 있는 새로운 기능을 미리보기로 제공하고 있다.</p> <h1 id="s3-테이블-설정하기"><a href="#s3-테이블-설정하기" class="header-anchor">#</a> S3 테이블 설정하기</h1> <p>DuckDB와 같은 도구로 쿼리할 수 있는 S3 테이블을 설정하려면 여러 단계가 필요하다. 아직 인프라 코드(IaC) 지원이 완전하지 않기 때문에 AWS 콘솔에서 수동으로 설정을 진행한다.</p> <h2 id="s3-테이블-버킷-생성하기"><a href="#s3-테이블-버킷-생성하기" class="header-anchor">#</a> S3 테이블 버킷 생성하기</h2> <p>AWS 콘솔을 열고 &quot;Amazon S3&quot; → &quot;테이블 버킷&quot;으로 이동한 후 &quot;테이블 버킷 생성&quot; 버튼을 클릭한다. 테이블 버킷의 이름을 입력한다.</p> <p>처음으로 이 작업을 수행하는 경우, 특정 리전은 &quot;AWS 분석 서비스와의 통합&quot;을 활성화해야 한다. (참고로 서울리전은 활성화를 체크해주어야 한다.)</p> <p><img src="/blog/assets/20250315/create-table-bucket.webp" alt="create-table-bucket"></p> <p>&quot;테이블 버킷 생성&quot; 버튼을 다시 누르면 테이블 버킷이 생성된다.</p> <p><img src="/blog/assets/20250315/table-buckets.webp" alt="2"></p> <h2 id="athena를-통한-s3-테이블-생성"><a href="#athena를-통한-s3-테이블-생성" class="header-anchor">#</a> Athena를 통한 S3 테이블 생성</h2> <p>다음 단계로 Athena를 사용하여 S3 테이블을 생성할 수 있다. &quot;Athena로 테이블 생성&quot; 버튼을 클릭한다.</p> <p><img src="/blog/assets/20250315/duckdb-test.webp" alt="1"></p> <p>이전에 네임스페이스를 생성했다면, 이를 선택하고 &quot;Athena로 테이블 생성&quot;을 클릭하여 S3 테이블 생성을 계속 진행할 수 있다.</p> <p><img src="/blog/assets/20250315/create-table-with-athena-namespace.webp" alt="1"></p> <p>이전에 네임스페이스를 생성했다면, 이를 선택하고 &quot;Athena로 테이블 생성&quot;을 클릭하여 S3 테이블 생성을 계속 진행할 수 있다.</p> <p><img src="/blog/assets/20250315/create-table-with-athena.webp" alt="1"></p> <p>이 작업은 Athena 콘솔이 열리는 새 탭을 연다.</p> <p><img src="/blog/assets/20250315/athena-console.webp" alt="1"></p> <p>💡
쿼리를 실제로 실행하기 전에 Athena 쿼리 결과 위치를 생성해야 하지만, 이는 이 블로그 게시물의 범위에 포함되지 않는다.</p> <p>테스트 목적으로 Athena에서 제공하는 예제 테이블 DDL을 사용할 수 있다. CREATE TABLE 문을 선택하고 &quot;실행&quot; 버튼을 클릭한다.</p> <p><img src="/blog/assets/20250315/create-table.webp" alt="1"></p> <p>Iceberg 지원이 있는 새로운 S3 테이블을 성공적으로 생성했다!</p> <h2 id="athena를-통한-테스트-데이터-삽입"><a href="#athena를-통한-테스트-데이터-삽입" class="header-anchor">#</a> Athena를 통한 테스트 데이터 삽입</h2> <p>나중에 DuckDB에서 데이터를 쿼리하려면 새로 생성한 테이블에 샘플 데이터를 삽입해야 한다. 따라서 CREATE TABLE 문 아래의 INSERT 문을 주석 해제하고 &quot;실행&quot; 버튼을 클릭한다.</p> <p><img src="/blog/assets/20250315/insert-into-table.webp" alt="1"></p> <p>성공하면 다음과 같이 보인다.</p> <p><img src="/blog/assets/20250315/insert_done.webp" alt="1"></p> <p>이제 실제로 DuckDB로 S3 테이블을 쿼리하기 위해 필요한 인프라와 데이터를 구축했다!</p> <h2 id="iam-권한"><a href="#iam-권한" class="header-anchor">#</a> IAM 권한</h2> <p>본격적으로 시작하기 전에 테스트에 사용할 계획인 IAM 역할에 적절한 권한이 있는지 확인해야 한다. 그렇지 않으면 쿼리를 수행할 수 없다.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;Version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2012-10-17&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Statement&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;Effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allow&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;Action&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;s3tables:*&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;YOUR OTHER IAM permissions&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;Resource&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>s3tables:*</code>이 해당 부분으로, s3tables 서비스에 대한 모든 IAM 작업을 사용할 수 있게 해준다.</p> <p>앞으로 DuckDB를 사용하여 S3 테이블을 쿼리하려는 위치에서 AWS 자격 증명을 설정 완료 되어있다고 가정한다. 이에 대한 자세한 내용은 포함되지 않지만, <a href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-quickstart.html" target="_blank" rel="noopener noreferrer">이 문서<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>를 참고할 수 있다.</p> <h1 id="최신-duckdb-버전-사용"><a href="#최신-duckdb-버전-사용" class="header-anchor">#</a> 최신 DuckDB 버전 사용</h1> <p>시작하기 앞서, DuckDB 버전 1.2.1을 설치했는지 확인하자. 그렇지 않으면 작동하지 않는다!</p> <h1 id="익스텐션-설치"><a href="#익스텐션-설치" class="header-anchor">#</a> 익스텐션 설치</h1> <p>터미널에서 DuckDB를 연다:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ duckdb <span class="token parameter variable">--version</span>
v1.2.1 8e52ec4395

$ duckdb
</code></pre></div><p>첫 번째 단계는 관련 확장(aws, httpsfs 및 iceberg)을 최신 버전으로 설치하는 것이다:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">FORCE</span> INSTALL aws <span class="token keyword">FROM</span> core_nightly<span class="token punctuation">;</span>
<span class="token keyword">FORCE</span> INSTALL httpfs <span class="token keyword">FROM</span> core_nightly<span class="token punctuation">;</span>
<span class="token keyword">FORCE</span> INSTALL iceberg <span class="token keyword">FROM</span> core_nightly<span class="token punctuation">;</span>
</code></pre></div><h1 id="s3-시크릿-생성"><a href="#s3-시크릿-생성" class="header-anchor">#</a> S3 시크릿 생성</h1> <p>다음 단계로, DuckDB가 자격 증명 체인 제공자를 통해 자동으로 인증할 수 있도록 시크릿을 생성해야 한다.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> SECRET <span class="token punctuation">(</span>
  <span class="token keyword">TYPE</span> s3<span class="token punctuation">,</span>
  PROVIDER credential_chain
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="데이터베이스-연결"><a href="#데이터베이스-연결" class="header-anchor">#</a> 데이터베이스 연결</h1> <p>다음으로, 실제 원격 데이터베이스를 로컬 DuckDB 인스턴스에 연결해야 한다. ARN이 올바른지 확인하라. 테이블 버킷 세부 정보에서 ARN을 복사할 수 있다.</p> <p><img src="/blog/assets/20250315/attach_database.webp" alt="1"></p> <p>아래에서 ARN을 대체하고 실행한다:</p> <div class="language-sql extra-class"><pre class="language-sql"><code>ATTACH <span class="token string">'arn:aws:s3tables:us-east-1:12345678912:bucket/duckdb-test'</span>
  <span class="token keyword">AS</span> test_db <span class="token punctuation">(</span>
    <span class="token keyword">TYPE</span> iceberg<span class="token punctuation">,</span>
    ENDPOINT_TYPE s3_tables
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="테이블-버킷의-네임스페이스에-있는-모든-테이블-표시"><a href="#테이블-버킷의-네임스페이스에-있는-모든-테이블-표시" class="header-anchor">#</a> 테이블 버킷의 네임스페이스에 있는 모든 테이블 표시</h1> <p>아래 명령문을 실행하면 S3 테이블 목록이 표시된다:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token keyword">ALL</span> <span class="token keyword">TABLES</span><span class="token punctuation">;</span>

┌──────────────┬─────────┬─────────────┬─────────────────────────────────────────────┬─────────────────────────┬───────────┐
│   <span class="token keyword">database</span>   │ <span class="token keyword">schema</span>  │    name     │                column_names                 │      column_types       │ <span class="token keyword">temporary</span> │
│   <span class="token keyword">varchar</span>    │ <span class="token keyword">varchar</span> │   <span class="token keyword">varchar</span>   │                  <span class="token keyword">varchar</span><span class="token punctuation">[</span><span class="token punctuation">]</span>                  │        <span class="token keyword">varchar</span><span class="token punctuation">[</span><span class="token punctuation">]</span>        │  <span class="token keyword">boolean</span>  │
├──────────────┼─────────┼─────────────┼─────────────────────────────────────────────┼─────────────────────────┼───────────┤
│ test_db      │ test    │ daily_sales │ <span class="token punctuation">[</span>sale_date<span class="token punctuation">,</span> product_category<span class="token punctuation">,</span> sales_amount<span class="token punctuation">]</span> │ <span class="token punctuation">[</span><span class="token keyword">DATE</span><span class="token punctuation">,</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">,</span> <span class="token keyword">DOUBLE</span><span class="token punctuation">]</span> │ <span class="token boolean">false</span>     │
└──────────────┴─────────┴─────────────┴─────────────────────────────────────────────┴─────────────────────────┴───────────┘
</code></pre></div><h1 id="s3-테이블-쿼리하기"><a href="#s3-테이블-쿼리하기" class="header-anchor">#</a> S3 테이블 쿼리하기</h1> <p>이제 S3 테이블을 쿼리할 수 있다.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> test_db<span class="token punctuation">.</span>test<span class="token punctuation">.</span>daily_sales<span class="token punctuation">;</span>
┌────────────┬──────────────────┬──────────────┐
│ sale_date  │ product_category │ sales_amount │
│    <span class="token keyword">date</span>    │     <span class="token keyword">varchar</span>      │    <span class="token keyword">double</span>    │
├────────────┼──────────────────┼──────────────┤
│ <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">15</span> │ Laptop           │        <span class="token number">900.0</span> │
│ <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">15</span> │ Monitor          │        <span class="token number">250.0</span> │
│ <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">16</span> │ Laptop           │       <span class="token number">1350.0</span> │
│ <span class="token number">2024</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">01</span> │ Monitor          │        <span class="token number">300.0</span> │
│ <span class="token number">2024</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">01</span> │ Keyboard         │         <span class="token number">60.0</span> │
│ <span class="token number">2024</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">02</span> │ Mouse            │         <span class="token number">25.0</span> │
│ <span class="token number">2024</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">02</span> │ Laptop           │       <span class="token number">1050.0</span> │
│ <span class="token number">2024</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">03</span> │ Laptop           │       <span class="token number">1200.0</span> │
│ <span class="token number">2024</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">03</span> │ Monitor          │        <span class="token number">375.0</span> │
└────────────┴──────────────────┴──────────────┘
</code></pre></div><h2 id="references"><a href="#references" class="header-anchor">#</a> References</h2> <ul><li><a href="https://duckdb.org/2025/03/14/preview-amazon-s3-tables.html" target="_blank" rel="noopener noreferrer">DuckDB Blog: Amazon S3 Tables in DuckDB<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/duckdb/duckdb-iceberg/pull/98" target="_blank" rel="noopener noreferrer">Add Glue support<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/duckdb/duckdb-iceberg/pull/98" target="_blank" rel="noopener noreferrer">Add Iceberg Catalog read support<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>예제 코드가 포함된 테스트는 test_glue.test에서 찾을 수 있다.</p> <ul><li><a href="https://github.com/duckdb/duckdb-iceberg/blob/main/test/sql/cloud/glue/test_glue.test" target="_blank" rel="noopener noreferrer">test_glue.test<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <hr> <h1 id="duckdb-ui-이용해보기"><a href="#duckdb-ui-이용해보기" class="header-anchor">#</a> DuckDB UI 이용해보기</h1></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#s3-테이블-버킷-생성하기" title="S3 테이블 버킷 생성하기">S3 테이블 버킷 생성하기</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#athena를-통한-s3-테이블-생성" title="Athena를 통한 S3 테이블 생성">Athena를 통한 S3 테이블 생성</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#athena를-통한-테스트-데이터-삽입" title="Athena를 통한 테스트 데이터 삽입">Athena를 통한 테스트 데이터 삽입</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#iam-권한" title="IAM 권한">IAM 권한</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#references" title="References">References</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/jiyeonseo" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li><li class="contact-item" data-v-3d9deeb8><a href="https://twitter.com/seojeee" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-3d9deeb8><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8><li class="copyright-item" data-v-3d9deeb8>Copyright © Jiyeon Seo 2020</li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ca882463.js" defer></script><script src="/assets/js/4.d48376ce.js" defer></script><script src="/assets/js/1.a7328d07.js" defer></script><script src="/assets/js/126.0d92253e.js" defer></script>
  </body>
</html>
