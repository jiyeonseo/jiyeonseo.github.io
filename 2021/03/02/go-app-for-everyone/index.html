<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>비개발자 동료를 위한 Bitbar 자동 세팅 스크립트 go로 짜보기 | Daily Log</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/favicons/favicon-16x16.png">
    <link rel="shortcut icon" href="../assets/favicons/favicon.ico">
    <link rel="alternate" type="application/rss+xml" href="https://jiyeonseo.github.io/rss.xml" title="Daily Log RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://jiyeonseo.github.io/feed.atom" title="Daily Log Atom Feed">
    <link rel="alternate" type="application/json" href="https://jiyeonseo.github.io/feed.json" title="Daily Log JSON Feed">
    <meta name="description" content="

업무용 맥 장비를 받으면 꼭 설치하는 앱이 있다. 바로 BitBar.

BitBar는 맥의 메뉴 ...">
    
    <link rel="preload" href="/assets/css/0.styles.d9e965bb.css" as="style"><link rel="preload" href="/assets/js/app.ca882463.js" as="script"><link rel="preload" href="/assets/js/4.d48376ce.js" as="script"><link rel="preload" href="/assets/js/1.a7328d07.js" as="script"><link rel="preload" href="/assets/js/92.41dc4428.js" as="script"><link rel="prefetch" href="/assets/js/100.20349d4f.js"><link rel="prefetch" href="/assets/js/101.337c7ac5.js"><link rel="prefetch" href="/assets/js/102.df0c3b4c.js"><link rel="prefetch" href="/assets/js/103.9ab2bce5.js"><link rel="prefetch" href="/assets/js/104.a8cfe2ac.js"><link rel="prefetch" href="/assets/js/105.fbf41c7d.js"><link rel="prefetch" href="/assets/js/106.137693c5.js"><link rel="prefetch" href="/assets/js/107.7b67094d.js"><link rel="prefetch" href="/assets/js/108.9c79596c.js"><link rel="prefetch" href="/assets/js/109.8f827ec6.js"><link rel="prefetch" href="/assets/js/11.266ec168.js"><link rel="prefetch" href="/assets/js/110.d3557852.js"><link rel="prefetch" href="/assets/js/111.037463d3.js"><link rel="prefetch" href="/assets/js/112.71dfe16b.js"><link rel="prefetch" href="/assets/js/113.98586e30.js"><link rel="prefetch" href="/assets/js/114.b61c2291.js"><link rel="prefetch" href="/assets/js/115.013a015b.js"><link rel="prefetch" href="/assets/js/116.1b44155e.js"><link rel="prefetch" href="/assets/js/117.ba320cb6.js"><link rel="prefetch" href="/assets/js/118.bce8c1cf.js"><link rel="prefetch" href="/assets/js/119.4cfe496d.js"><link rel="prefetch" href="/assets/js/12.8f3a6060.js"><link rel="prefetch" href="/assets/js/120.df3465f8.js"><link rel="prefetch" href="/assets/js/121.2ab0ab3e.js"><link rel="prefetch" href="/assets/js/122.e84ca54f.js"><link rel="prefetch" href="/assets/js/123.c7c4409a.js"><link rel="prefetch" href="/assets/js/124.07b6783e.js"><link rel="prefetch" href="/assets/js/125.b1701c7a.js"><link rel="prefetch" href="/assets/js/126.0d92253e.js"><link rel="prefetch" href="/assets/js/127.007a575d.js"><link rel="prefetch" href="/assets/js/13.9ff4ae05.js"><link rel="prefetch" href="/assets/js/14.215024b0.js"><link rel="prefetch" href="/assets/js/15.0ff47d16.js"><link rel="prefetch" href="/assets/js/16.37e6c0ed.js"><link rel="prefetch" href="/assets/js/17.cbba4f66.js"><link rel="prefetch" href="/assets/js/18.b7e71dfe.js"><link rel="prefetch" href="/assets/js/19.c4464fe9.js"><link rel="prefetch" href="/assets/js/2.f8783da8.js"><link rel="prefetch" href="/assets/js/20.2dc08191.js"><link rel="prefetch" href="/assets/js/21.ff5f7b06.js"><link rel="prefetch" href="/assets/js/22.661f2a84.js"><link rel="prefetch" href="/assets/js/23.cf29033a.js"><link rel="prefetch" href="/assets/js/24.dd6f5bc6.js"><link rel="prefetch" href="/assets/js/25.9d7bdc46.js"><link rel="prefetch" href="/assets/js/26.3b8d6e0b.js"><link rel="prefetch" href="/assets/js/27.80928391.js"><link rel="prefetch" href="/assets/js/28.58a77b17.js"><link rel="prefetch" href="/assets/js/29.7f8113cb.js"><link rel="prefetch" href="/assets/js/3.487971c8.js"><link rel="prefetch" href="/assets/js/30.48f0ed8a.js"><link rel="prefetch" href="/assets/js/31.832b04d7.js"><link rel="prefetch" href="/assets/js/32.f05f003a.js"><link rel="prefetch" href="/assets/js/33.f9295acc.js"><link rel="prefetch" href="/assets/js/34.a80db534.js"><link rel="prefetch" href="/assets/js/35.abe84c23.js"><link rel="prefetch" href="/assets/js/36.4edabe0d.js"><link rel="prefetch" href="/assets/js/37.e7cfc869.js"><link rel="prefetch" href="/assets/js/38.aa1064e1.js"><link rel="prefetch" href="/assets/js/39.06859e09.js"><link rel="prefetch" href="/assets/js/40.7969b128.js"><link rel="prefetch" href="/assets/js/41.7daa36db.js"><link rel="prefetch" href="/assets/js/42.0b1c5b61.js"><link rel="prefetch" href="/assets/js/43.e741fcb4.js"><link rel="prefetch" href="/assets/js/44.212dc972.js"><link rel="prefetch" href="/assets/js/45.c68048f8.js"><link rel="prefetch" href="/assets/js/46.114afb81.js"><link rel="prefetch" href="/assets/js/47.862c6e14.js"><link rel="prefetch" href="/assets/js/48.c9b2f074.js"><link rel="prefetch" href="/assets/js/49.e7114482.js"><link rel="prefetch" href="/assets/js/5.bcd1442f.js"><link rel="prefetch" href="/assets/js/50.f467528a.js"><link rel="prefetch" href="/assets/js/51.f821ca96.js"><link rel="prefetch" href="/assets/js/52.649435a5.js"><link rel="prefetch" href="/assets/js/53.5b8dc67a.js"><link rel="prefetch" href="/assets/js/54.a0ca167c.js"><link rel="prefetch" href="/assets/js/55.3c3380f0.js"><link rel="prefetch" href="/assets/js/56.18549872.js"><link rel="prefetch" href="/assets/js/57.e19ed683.js"><link rel="prefetch" href="/assets/js/58.79fe55f7.js"><link rel="prefetch" href="/assets/js/59.4db8e029.js"><link rel="prefetch" href="/assets/js/6.49ca5872.js"><link rel="prefetch" href="/assets/js/60.9abd3c2e.js"><link rel="prefetch" href="/assets/js/61.e63ac9bb.js"><link rel="prefetch" href="/assets/js/62.6e924a53.js"><link rel="prefetch" href="/assets/js/63.9f33542a.js"><link rel="prefetch" href="/assets/js/64.38c313d2.js"><link rel="prefetch" href="/assets/js/65.fcfcf532.js"><link rel="prefetch" href="/assets/js/66.5012f3db.js"><link rel="prefetch" href="/assets/js/67.5b57b6b4.js"><link rel="prefetch" href="/assets/js/68.d99d5845.js"><link rel="prefetch" href="/assets/js/69.8107e489.js"><link rel="prefetch" href="/assets/js/7.a66f6791.js"><link rel="prefetch" href="/assets/js/70.27161263.js"><link rel="prefetch" href="/assets/js/71.761b94a6.js"><link rel="prefetch" href="/assets/js/72.531ebc5e.js"><link rel="prefetch" href="/assets/js/73.2c4b9c38.js"><link rel="prefetch" href="/assets/js/74.f50e9025.js"><link rel="prefetch" href="/assets/js/75.95a579c0.js"><link rel="prefetch" href="/assets/js/76.54cac59a.js"><link rel="prefetch" href="/assets/js/77.43aab426.js"><link rel="prefetch" href="/assets/js/78.f19c6ed1.js"><link rel="prefetch" href="/assets/js/79.5758ad17.js"><link rel="prefetch" href="/assets/js/8.b2bf099e.js"><link rel="prefetch" href="/assets/js/80.9a393ba1.js"><link rel="prefetch" href="/assets/js/81.53c49996.js"><link rel="prefetch" href="/assets/js/82.b94db98b.js"><link rel="prefetch" href="/assets/js/83.44f7bcdf.js"><link rel="prefetch" href="/assets/js/84.38740eee.js"><link rel="prefetch" href="/assets/js/85.75d98f53.js"><link rel="prefetch" href="/assets/js/86.cbe5c682.js"><link rel="prefetch" href="/assets/js/87.91edfd8c.js"><link rel="prefetch" href="/assets/js/88.a414f2e3.js"><link rel="prefetch" href="/assets/js/89.a0e02dc8.js"><link rel="prefetch" href="/assets/js/90.8df0fa19.js"><link rel="prefetch" href="/assets/js/91.30c58ca2.js"><link rel="prefetch" href="/assets/js/93.4dac8c5f.js"><link rel="prefetch" href="/assets/js/94.6f998976.js"><link rel="prefetch" href="/assets/js/95.fa78735e.js"><link rel="prefetch" href="/assets/js/96.46ebbc99.js"><link rel="prefetch" href="/assets/js/97.b91d70bf.js"><link rel="prefetch" href="/assets/js/98.08cf1b1d.js"><link rel="prefetch" href="/assets/js/99.f184a890.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.b53dac77.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d9e965bb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">Daily Log </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li><li class="nav-item"><a href="/about.html" class="nav-link">About Me</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">Daily Log </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li><li class="mobile-nav-item"><a href="/about.html" class="nav-link">About Me</a></li> <li class="mobile-nav-item"><a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        
      </h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2021-03-02T00:00:00.000Z">
      2021-03-02
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/tag/golang" data-v-42ccfcd5><span data-v-42ccfcd5>golang</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/toys" data-v-42ccfcd5><span data-v-42ccfcd5>toys</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h1 id="비개발자-동료를-위한-bitbar-자동-세팅-스크립트-go로-짜보기"><a href="#비개발자-동료를-위한-bitbar-자동-세팅-스크립트-go로-짜보기" class="header-anchor">#</a> 비개발자 동료를 위한 Bitbar 자동 세팅 스크립트 go로 짜보기</h1> <p>업무용 맥 장비를 받으면 꼭 설치하는 앱이 있다. 바로 BitBar.</p> <p><img src="https://user-images.githubusercontent.com/2231510/109470694-209fa480-7ab3-11eb-8ec3-e73c9ba6cf4b.png" alt=""></p> <p><a href="https://github.com/matryer/bitbar" target="_blank" rel="noopener noreferrer">BitBar<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>는 맥의 메뉴 바를 이용하여 여러 생산성 유틸 혹은 스크립트를 사용할 수 있게 도와주는 앱이다. 모니터링용이나 자주 사용하는 기능들을 쇼트컷으로 만들 수도 있다. 이미 맥을 잘 사용하는 개발자들이라면 한번 쯤은 들어봤을 법한 아주 유명한 앱이고 Plugin 만드는게 어렵지 않기 때문에 입맛대로 새롭게 기능들을 추가하기도 편하다.</p> <p><img src="https://raw.github.com/matryer/bitbar/master/Docs/BitBar-Example-Menu.png" alt="BitBar Example showing menu open"></p> <p>설치 방법은 크게 두 가지로</p> <ul><li><code>brew</code> 를 이용하거나</li> <li><a href="https://github.com/matryer/bitbar/releases" target="_blank" rel="noopener noreferrer">BitBar repo의 releases<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>에 올라와 있는 최신 빌드된 앱을 다운받아 설치 할 수 있다.</li></ul> <p>그 뒤 <a href="https://github.com/matryer/bitbar-plugins" target="_blank" rel="noopener noreferrer">bitbar-plugins<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>에 올라와 있는 필요한 스크립트들을 골라 Plugin folder에 복사 붙혀  넣은다음 <code>Refresh all</code>을 이용해 갱신하면 된다. (원래는 <a href="http://getbitbar.com" target="_blank" rel="noopener noreferrer">getbitbar.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>이 있어서 브라우저에서 클릭만으로 plugin 설치를 도와주는 방법이 있었는데 <a href="https://github.com/matryer/bitbar/issues/607" target="_blank" rel="noopener noreferrer">bitbar2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 준비 때문인지 페이지가 사라지고 지금은 GitHub으로 연결되고 있다.)</p> <p>물론 설명대로 따라가면 그닥 어렵지 않은 방법이다. (특히, MSA하는 개발자들에게 이 정도는 로컬 세팅? 정말 아무것도 아니겠지 허허.) 하지만 비개발자들에게 <code>brew</code>를 이용한다던가, <code>chmod +x *.sh</code> 이러한 명령어들을 꼭 이해할 필요는 없어 보였고, 각자 필요한 plugin들을 깔 수는 있지만 결국 업무용도로 자주 쓰이는 것들은 한 장소에서 미리 설정하여 팀에서 배포해서 동일하게 사용하는 것도 좋을 것 같다는 생각이 들었다.</p> <p>이 글에서는 이 BitBar 자동 세팅 스크립트 만드는 과정을 이야기 하고자 한다.</p> <h2 id="_1-자동화-툴"><a href="#_1-자동화-툴" class="header-anchor">#</a> 1. 자동화 툴</h2> <p>가장 먼저 떠오른 방법은 역시나 shell 스크립트 혹은 python 스크립트였다. <code>.sh</code>나 <code>.py</code> 확장자가 그렇게 친절하다 생각 되지 않고 권한 부여를 해야 하는 경우 터미널을 켜서 <code>chmod</code> 와 같은 명령어를 치는 것도 꽤나 귀찮을 거라 생각된다.</p> <p>다음으로는 <code>automator</code></p> <p><img src="https://user-images.githubusercontent.com/2231510/109475389-ff41b700-7ab8-11eb-9c4c-7f6c054d346d.jpg" alt=""></p> <p>Mac에서 기본으로 제공하는 툴로 workflow를 시각화 해서 보여주기도 하고, 기본적으로 OS의 기능을 다양하게 제공해주고 있기 때문에 여러 복합적인 작업들을 구성하기에 용이해보였다. 또, 저장 후 &quot;응용 프로그램&quot;으로 내보내기가 가능하기 때문에 후에 배포시에도 좋을 것 같다라는 생각이 들었다.</p> <p>하지만, 작업하면서 <code>curl</code>로 코드를 다운을 받고 <code>unzip</code> 등의 복잡한 시나리오를 구현하게 되면서 나의 의도와 매칭되는 기능들이 어떤 것들인지 몰라서 결국 내가 스크립트 직접 짜는 것으로 돌아오게 되었다. (아마 내가 원하는 기능이 다 있을 것 같긴 하지만, 하나 하나 찾는것 보다는 짜는게 더 쉬울 것 같았다.)</p> <p>결국, <code>Go</code>로 짜게 되었다.</p> <ul><li>첫번째 이유는 빌드(<code>go build</code>)를 하면 사용하려는 유저는 다른 명령어를 알 필요 없이 그저 클릭만으로 바이너리를 실행할 수 있기 때문이였고,</li> <li>두번째로는 지난달 베타리딩으로 배운 go를 한번 써먹어 보고 싶어서 였다. (간단한 토이 프로젝트는 역시 잘 모르는 언어로 해야 제맛!)</li></ul> <h2 id="_2-시나리오"><a href="#_2-시나리오" class="header-anchor">#</a> 2. 시나리오</h2> <p>내가 필요로 하는 시나리오 구성은 다음과 같았다.</p> <ol><li><p>공용으로 쓸 plugin들은 미리 <code>/plugins</code>에 세팅해두고 이 스크립트들은 자동으로 받아져서 Plugin folder으로 옮겨진다.</p></li> <li><p>BitBar 설치는 <code>brew</code> 대신 zip 파일로 배포된 설치 파일을 이용해 설치한다.</p></li></ol> <h2 id="_3-구현하기"><a href="#_3-구현하기" class="header-anchor">#</a> 3. 구현하기</h2> <h3 id="_1-plugins-에-기본으로-사용할-plugin들-구성하기"><a href="#_1-plugins-에-기본으로-사용할-plugin들-구성하기" class="header-anchor">#</a> 1. <code>/plugins</code> 에 기본으로 사용할 plugin들 구성하기</h3> <p><a href="https://github.com/matryer/bitbar-plugins" target="_blank" rel="noopener noreferrer">bitbar-plugins<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>에 올라온 스크립트들을 보면 대부분 유저가 설정해야하는 설정값들이 코드 내에서 수정하게 되어있다. 예를 들어, <a href="https://github.com/matryer/bitbar-plugins/blob/master/Dev/Jira/jira-issues.10m.py" target="_blank" rel="noopener noreferrer">지라 이슈와 연동하는 plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 경우에도 지라 URL, 유저 ID, PW를 코드 내에 직접 입력을 해야 제대로 동작하고 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>    JIRAURL = &quot;&lt;enter-jira-url&gt;&quot;
    USERNAME = &quot;&lt;put here usernema&gt;&quot;
    PASSWORD = &quot;&lt;put here password&gt;&quot;
    JQL = &quot;resolution = Unresolved&quot;
</code></pre></div><p>코드를 이해해야 하고 또 고쳐야 한다는 부분을 개선하고 싶었다.</p> <p>이 부분은 변수를 json 파일로 따로 나눠 파일을 읽어 오는 방식으로 고쳤다. 예를 들어, 내가 만든 <a href="https://github.com/jiyeonseo/bitbar-for-everyone/blob/main/plugins/links.10m.py" target="_blank" rel="noopener noreferrer">예제 프로젝트의 북마크 기능<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>은 2중으로 구현된 json 포맷을 읽어 링크를 연결해주는 간단한 유틸이다.</p> <div class="language- extra-class"><pre class="language-text"><code>{
    &quot;Office&quot; : {
        &quot;☘️ main&quot; : &quot;https://google.com&quot;,
        &quot;✉️ email&quot; : &quot;https://mail.google.com/mail/&quot;,
        &quot;📅 calendar&quot; : &quot;https://calendar.google.com/calendar&quot;
    }
}
</code></pre></div><p>그리고 메뉴바 가장 하단에 <code>configuration</code> 메뉴를 넣어 선택하면 바로 파일 에디터가 뜨고 json 파일만으로 설정을 바꿀 수 있게 하였다.</p> <p><img src="https://user-images.githubusercontent.com/2231510/109478482-a6741d80-7abc-11eb-8826-3c9af1c99f9b.png" alt=""> <img src="https://user-images.githubusercontent.com/2231510/109478343-76c51580-7abc-11eb-96ec-1dfbd30c64be.png" alt=""></p> <p>이 경우 코드를 따로 파악할 필요가 없고 편집이 좀 더 편하다. 다만, json 형식이 크게 친절하진 않으니 이 부분은 좀 더 고민해 봐야겠다.</p> <h3 id="_2-github에서-plugins-코드-다운받기"><a href="#_2-github에서-plugins-코드-다운받기" class="header-anchor">#</a> 2. Github에서 plugins 코드 다운받기</h3> <p>Github의 코드를 받는 가장 좋은 방법은 <code>git clone</code>이지만, 이 경우 <code>git</code>이 로컬에 설치 되어있어야 하므로 다른 방법을 생각해 보았다.</p> <p>GitHub에서는 특정 브랜치의 코드를 archive zip으로 다운받을 수 있는 기능을 제공하고 있다.</p> <p><img src="https://user-images.githubusercontent.com/2231510/109497422-5eadc000-7ad5-11eb-8295-8c2c9fbfc25a.png" alt=""></p> <p>주소는 <code>https://github.com/{user}/{repo}/archive/{branch}.zip</code> (ex. https://github.com/jiyeonseo/bitbar-for-everyone/archive/main.zip) 로 zip파일을 받고 <code>/plugins</code> 폴더 내의 파일들을 plugin folder로 옮기도록 했다.</p> <div class="language-go extra-class"><pre class="language-go"><code>    plugins <span class="token operator">:=</span> <span class="token function">downloadPlugins</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// zip 파일 다운로드 및 unzip</span>
	
	home<span class="token punctuation">,</span> <span class="token boolean">_</span>  <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">UserHomeDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    pluginLocation <span class="token operator">:=</span> plugins<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;/plugins/&quot;</span> 
    configLocation <span class="token operator">:=</span> home<span class="token operator">+</span><span class="token string">&quot;/Documents/bitbar/&quot;</span> <span class="token comment">// 문서 아래에 /bitbar 위치로 plugin 위치를 잡았다.</span>
	os<span class="token punctuation">.</span><span class="token function">RemoveAll</span><span class="token punctuation">(</span>configLocation<span class="token punctuation">)</span> <span class="token comment">// 기존 파일 삭제 </span>
	rerr <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Rename</span><span class="token punctuation">(</span>pluginLocation<span class="token punctuation">,</span> configLocation<span class="token punctuation">)</span> <span class="token comment">// 다운 받은 plugins 스크립트 옮기기 </span>
	<span class="token keyword">if</span> rerr <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Rename: %s\n&quot;</span><span class="token punctuation">,</span> rerr<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
</code></pre></div><p>(Note) 만약 GitHub Enterprise 를 사용하거나 private 사용 시 <code>/archive/{branch}.zip</code> 으로 받을 경우 제대로 받아지지 않는다. 이 경우, Github token을 발행받아 <code>https://github.com/{user}/{repo}/zipball/{branch}</code>를 통해 동일하게 zip 파일로 받을 수 있다. (예제 코드에서도 <a href="https://github.com/jiyeonseo/bitbar-for-everyone/blob/main/install.go#L72-L76" target="_blank" rel="noopener noreferrer">auth가 필요한 경우에는 헤더에 token을 넘기도록<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 한 부분이 있으니 이 부분을 참고하면 된다.)</p> <h3 id="_3-bitbar-다운로드-및-설치하기"><a href="#_3-bitbar-다운로드-및-설치하기" class="header-anchor">#</a> 3. BitBar 다운로드 및 설치하기</h3> <p>나는 항상 <code>brew</code>를 통해 BitBar를 설치하고 있지만, 명령어를 치고 권한 체크 하는 등의 작업이 자동화 작업 내에서는 빼고 싶어서, 위와 동일하게 배포된 zip 파일을 받아 설치하는 방식으로 작업해 보았다.</p> <div class="language-go extra-class"><pre class="language-go"><code>	cerr <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Chdir</span><span class="token punctuation">(</span>home<span class="token operator">+</span><span class="token string">&quot;/Downloads&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 다운로드 폴더로 현재 위치로 옮겨서 </span>
	<span class="token keyword">if</span> cerr <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Chdir err: %s\n&quot;</span><span class="token punctuation">,</span> cerr<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	bitbar <span class="token operator">:=</span> <span class="token function">downloadBitbar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// zip 파일 다운로드 및 unzip 하고 </span>

	cmd <span class="token operator">:=</span> exec<span class="token punctuation">.</span><span class="token function">Command</span><span class="token punctuation">(</span><span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span> bitbar<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 바이너리 실행</span>
	stdout<span class="token punctuation">,</span> oerr <span class="token operator">:=</span> cmd<span class="token punctuation">.</span><span class="token function">Output</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> oerr <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Open err: %s\n&quot;</span><span class="token punctuation">,</span> oerr<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
</code></pre></div><h2 id="_3-배포하기"><a href="#_3-배포하기" class="header-anchor">#</a> 3. 배포하기</h2> <p>이제 다음과 같이 빌드를 해주게 되면 우선 스크립트 작업은 마무리가 된다.</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ go build <span class="token parameter variable">-o</span> install-bitbar
</code></pre></div><p>그럼 이 빌드된 바이너리를 배포하는 가장 좋은 방법이 무엇일까?</p> <p>제일 먼저 떠오르는 방법은 Storage(AWS S3와 같은)를 이용하여 서빙하기. 토이 프로젝트이기 때문에 관리 포인트를 최대한 적게 하고 싶었다. 그래서 우선 pass.</p> <p>GitHub 에서 코드를 관리할 예정임으로 빌드된 바이너리도 GitHub에 올리는 것이 관리 측면에서 유리해보였다.</p> <p><img src="https://user-images.githubusercontent.com/2231510/109571219-b3c9f000-7b2e-11eb-823e-655b62a473ec.png" alt=""></p> <p>혹시나 해서 이렇게 올려도 되나 싶어 올려봤는데 안된다... 다운로드 받아서 실행해보면 다운받은 바이너리가 문제가 있는 듯 하다.</p> <p>(update) 권한의 문제였다! repository에 올린 바이너리를 <code>git clone</code> 을 통해 다운로드 받으면 권한이 있다.</p> <div class="language- extra-class"><pre class="language-text"><code>-rwxr-xr-x  1 user  staff   6.5M  3  6 14:06 install-bitbar
</code></pre></div><p>하지만 브라우저에서 직접 다운로드를 하게 되면...<br> <img src="https://user-images.githubusercontent.com/2231510/110196124-beb1b700-7e85-11eb-859a-5cf9bf52b39c.png" alt=""></p> <div class="language- extra-class"><pre class="language-text"><code>-rw-r--r--@ 1 user  staff   6.5M  3  6 14:11 install-bitbar
</code></pre></div><p>권한이 변경된다. 그리고 클릭을 통해 실행하려고 하면...</p> <p><img src="https://user-images.githubusercontent.com/2231510/110196183-3384f100-7e86-11eb-95b4-0512a861d51a.png" alt=""></p> <p>와 같은 경고창이 뜬다. (permission denied 일거라 생각할 수 없는 경고 메세지... ) 터미널에서 <code>chmod +x install-bitbar</code>로 실행 권한을 주면 잘 된다. 하지만 비개발자를 위한 스크립트이기에 터미널로 넘어가는 과정을 넣고 싶지 않았다.</p> <p>BitBar에서 사용하고 있는 방법을 따라해보기로 했다. <code>/{버전명 폴더}</code> (ex. <code>/0.0.1</code>) 에 빌드된 바이너리를 넣고 압축하여 release에 함께 추가해 주었다.</p> <p><img src="https://user-images.githubusercontent.com/2231510/109571812-90537500-7b2f-11eb-80fa-3eadd0c2fdb0.png" alt=""></p> <h2 id="더-해볼-만한-것"><a href="#더-해볼-만한-것" class="header-anchor">#</a> 더 해볼 만한 것</h2> <p>지금 글을 작성하면서 생각난 아이디어는 Github Actions로 <code>main</code> branch로 새로운 push가 들어올 때 마다 <code>install.go</code>를 빌드해서 release에 업데이트 해주는 자동화 프로세스도 추가해 볼 수 있을 것 같다.</p> <p>그리고 사실, 위 작업한 바이너리를 실행하려고 하면 '확인되지 않은 개발자'라고 경고가 뜬다. 나중에 여유가 된다면 certificate를 넣는 작업도 추가해보고 싶다.</p> <hr> <p>평소에도 자동화나 단순 업무를 위한 스크립트를 짜는 것은 해 보았으나 (아예 밖으로 오픈되는 서비스가 아닌 이상에) 비개발자 유저가 사용하기 편하게 빌드하고 배포 하는 것까지 고민하는 일은 별로 없었던 것 같다. 나중에 시간이 되면 <a href="http://getbitbar.com" target="_blank" rel="noopener noreferrer">getbitbar.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 에서 예전에 제공했던 것 처럼 브라우저에서 바로 설치로 넘어가는 방법도 고민해 볼 수 있을 것 같다.</p> <p>위에 설명된 내용은 아래 저장소에서 확인할 수 있다 : <a href="https://github.com/jiyeonseo/bitbar-for-everyone" target="_blank" rel="noopener noreferrer">https://github.com/jiyeonseo/bitbar-for-everyone<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#_1-자동화-툴" title="1. 자동화 툴">1. 자동화 툴</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_2-시나리오" title="2. 시나리오">2. 시나리오</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_3-구현하기" title="3. 구현하기">3. 구현하기</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_1-plugins-에-기본으로-사용할-plugin들-구성하기" title="1. /plugins 에 기본으로 사용할 plugin들 구성하기">1. /plugins 에 기본으로 사용할 plugin들 구성하기</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_2-github에서-plugins-코드-다운받기" title="2. Github에서 plugins 코드 다운받기">2. Github에서 plugins 코드 다운받기</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_3-bitbar-다운로드-및-설치하기" title="3. BitBar 다운로드 및 설치하기">3. BitBar 다운로드 및 설치하기</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_3-배포하기" title="3. 배포하기">3. 배포하기</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#더-해볼-만한-것" title="더 해볼 만한 것">더 해볼 만한 것</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/jiyeonseo" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li><li class="contact-item" data-v-3d9deeb8><a href="https://twitter.com/seojeee" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-3d9deeb8><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8><li class="copyright-item" data-v-3d9deeb8>Copyright © Jiyeon Seo 2020</li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ca882463.js" defer></script><script src="/assets/js/4.d48376ce.js" defer></script><script src="/assets/js/1.a7328d07.js" defer></script><script src="/assets/js/92.41dc4428.js" defer></script>
  </body>
</html>
